<div class="container">
    <div class="">
        <button class="btn btn-secondary mt-2" (click)="onAddBtnCity()">Add City</button>
    </div>

<div class="formcontainer" *ngIf="isShow">
    <!-- <form [formGroup]="countryForm" (ngSubmit)="submitCountryForm()"> -->
    <form #cityForm="ngForm" (ngSubmit)="onsubmitCityForm(cityForm)">
        <div class="form-group row m-2">
            <label for="countrymenu" class="col-sm-2 col-form-label" ml-5>Country</label>
            <div class="col-sm-10 ">
                <select class="form-control ms-3" [(ngModel)]="selectedCountry" (change)="onCountrySelected()" name="country_id"
                    id="countrymenu">
                    <option value="" disabled selected>Select Country</option>
                    <option *ngFor="let countrydata of countriesrcvd" [value]="countrydata._id">
                    <!-- <option *ngFor="let countrydata of countriesrcvd" [value]="countrydata.country"> -->
                        {{countrydata.country}}
                    </option>
                </select>
            </div>
        </div>

         <div class="form-group row m-2">
            <label for="citymenu" class="col-sm-2 col-form-label" ml-5>City</label>
            <div class="col-sm-10">
                <input type="text" [(ngModel)]="enteredLocation" #locationInput id="citylocation" (input)="initAutocomplete()" name="location" placeholder="Enter location" class="form-control ms-3" [disabled]="isbuttonshow" required>
            </div>
        </div>
        <!-- <div class="form-group row m-2">
            <label for="citymenu" class="col-sm-2 col-form-label" ml-5>City</label>
            <div class="col-sm-10">
                <select class="form-control ms-3 me-3" [(ngModel)]="selectedCity" name="city" id="citymenu">
                    <option value="" disabled selected>Select City</option>
                    <option *ngFor="let city of selectedCountryCities" [value]="city">{{city}}
                    </option>
                </select>
            </div>
        </div> -->
        <div class="form-group row m-2">
            <div class="col-sm-10">
                <button class="btn btn-secondary mx-2" [disabled]="!cityForm.valid" *ngIf="isShowAddBtn">Add</button>
                <button class="btn btn-secondary mx-2" [disabled]="!cityForm.valid" *ngIf="isShowEditBtn">Update</button>
                <button class="btn btn-secondary mx-2" (click)="onCancelBtn(cityForm)">Cancel</button>
                <!-- <button type="submit" class="btn btn-secondary">Add</button> -->
            </div>
        </div>
    </form>
</div>
<div #mapContainer id="map"></div>
<div id="output"></div>

<label for="pageSize">Show Data : </label>
  <select id="pageSize" [(ngModel)]="tableSize" (change)="onPageSizeChange($event)">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
  </select>

<div class="container">
    <div class="row my-4">
        <div class="col-lg-12">
            <div class="table-responsive">
                <table class="table table-striped text-center my-3" id="tdata">
                    <thead>
                        <tr class="table-dark text-center">
                            <th>Id</th>
                            <th>Country</th>
                            <th>City</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="tbody">
                            <tr class="align-middle" id="tabletr" *ngFor="let citydt of citiesrcvd | paginate
                            : {
                                itemsPerPage: tableSize,
                                currentPage: page,
                                totalItems: count
                              }; let i = index ">
                                <td>{{i + 1}}
                                </td>
                                <td>{{citydt.countrydata.country}}
                                </td>
                                <td>{{citydt.city}}
                                </td>
                                <td><button  class="text-success border-0 bg-transparent edit" (click)="onEditCity(citydt)"><i
                                            class="fas fa-edit fa-lg mx-1"></i></button>
                                    <!-- <a href="#" class="text-danger delete" id="" ><i
                                            class="fas fa-trash fa-lg mx-1"></i></a> -->
                                </td>
                            </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
  </div>
</div>
<div class="d-flex justify-content-center">
    <pagination-controls previousLabel nextLabel (pageChange)="onPageChange($event)" [maxSize]="5" [responsive]="true">
    </pagination-controls>
  </div>